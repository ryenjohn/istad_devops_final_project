[all:vars]
ansible_user=second-project
ansible_ssh_extra_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'

[local]
localhost ansible_connection=local

[kube_control_plane:children]
masters

[masters]
{% for instance in gcp_instances.results %}
{% if not instance.skipped is defined and instance.name  is defined %}
{{ instance.name }} ansible_host={{ instance.networkInterfaces[0].accessConfigs[0].natIP }} ip={{ instance.networkInterfaces[0].networkIP }} ansible_user=second-project
{% endif %}
{% endfor %}

[etcd:children]
kube_control_plane